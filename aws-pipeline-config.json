{
  "pipeline": {
    "name": "finnancy-front-pipeline",
    "description": "Pipeline CI/CD para aplicaci贸n React con CodeBuild y Elastic Beanstalk",
    "stages": [
      {
        "name": "Source",
        "actions": [
          {
            "name": "SourceAction",
            "actionTypeId": {
              "category": "Source",
              "owner": "ThirdParty",
              "provider": "GitHub",
              "version": "1"
            },
            "configuration": {
              "Owner": "tu-usuario",
              "Repo": "finnancy-front",
              "Branch": "main",
              "OAuthToken": "{{resolve:secretsmanager:github-token:SecretString:token}}"
            },
            "outputArtifacts": [
              {
                "name": "SourceOutput"
              }
            ]
          }
        ]
      },
      {
        "name": "Build",
        "actions": [
          {
            "name": "BuildAction",
            "actionTypeId": {
              "category": "Build",
              "owner": "AWS",
              "provider": "CodeBuild",
              "version": "1"
            },
            "configuration": {
              "ProjectName": "finnancy-front-build"
            },
            "inputArtifacts": [
              {
                "name": "SourceOutput"
              }
            ],
            "outputArtifacts": [
              {
                "name": "BuildOutput"
              }
            ]
          }
        ]
      },
      {
        "name": "Deploy",
        "actions": [
          {
            "name": "DeployAction",
            "actionTypeId": {
              "category": "Deploy",
              "owner": "AWS",
              "provider": "ElasticBeanstalk",
              "version": "1"
            },
            "configuration": {
              "ApplicationName": "finnancy-front",
              "EnvironmentName": "finnancy-front-prod"
            },
            "inputArtifacts": [
              {
                "name": "BuildOutput"
              }
            ]
          }
        ]
      }
    ],
    "artifactStore": {
      "type": "S3",
      "location": "finnancy-pipeline-artifacts"
    },
    "roleArn": "arn:aws:iam::ACCOUNT-ID:role/CodePipelineServiceRole"
  },
  "codebuild": {
    "projectName": "finnancy-front-build",
    "description": "Build project para aplicaci贸n React Finnancy",
    "source": {
      "type": "CODEPIPELINE",
      "buildspec": "buildspec.yml"
    },
    "artifacts": {
      "type": "CODEPIPELINE"
    },
    "environment": {
      "type": "LINUX_CONTAINER",
      "image": "aws/codebuild/amazonlinux2-x86_64-standard:4.0",
      "computeType": "BUILD_GENERAL1_MEDIUM",
      "environmentVariables": [
        {
          "name": "NODE_ENV",
          "value": "production"
        },
        {
          "name": "NPM_CONFIG_PRODUCTION",
          "value": "false"
        }
      ]
    },
    "serviceRole": "arn:aws:iam::ACCOUNT-ID:role/CodeBuildServiceRole"
  },
  "elasticbeanstalk": {
    "applicationName": "finnancy-front",
    "description": "Aplicaci贸n React para gesti贸n financiera personal",
    "environments": [
      {
        "environmentName": "finnancy-front-dev",
        "solutionStackName": "64bit Amazon Linux 2 v5.8.4 running Node.js 18",
        "optionSettings": [
          {
            "namespace": "aws:autoscaling:launchconfiguration",
            "optionName": "InstanceType",
            "value": "t3.micro"
          },
          {
            "namespace": "aws:autoscaling:asg",
            "optionName": "MinSize",
            "value": "1"
          },
          {
            "namespace": "aws:autoscaling:asg",
            "optionName": "MaxSize",
            "value": "2"
          }
        ]
      },
      {
        "environmentName": "finnancy-front-prod",
        "solutionStackName": "64bit Amazon Linux 2 v5.8.4 running Node.js 18",
        "optionSettings": [
          {
            "namespace": "aws:autoscaling:launchconfiguration",
            "optionName": "InstanceType",
            "value": "t3.small"
          },
          {
            "namespace": "aws:autoscaling:asg",
            "optionName": "MinSize",
            "value": "2"
          },
          {
            "namespace": "aws:autoscaling:asg",
            "optionName": "MaxSize",
            "value": "4"
          }
        ]
      }
    ]
  }
}
